<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=gb2312">
    <title>图片上传</title>
    <script>
        function viewmypic(mypic, imgfile) {
            if (imgfile.files && imgfile.files[0]) {
                mypic.style.display = "";
                //火狐下，直接设img属性
                //mypic.src = imgfile.files[0].getAsDataURL();

                //火狐7以上版本不能用上面的getAsDataURL()方式获取，需要以下方式
                mypic.src = window.URL.createObjectURL(imgfile.files[0]);
            }
            else {
//IE下
                if (imgfile.value) {
                    mypic.src = imgfile.value;
                    mypic.style.display = "";
                    mypic.border = 1;
                }
            }
        }
    </script>
</head>
<body>
<center>
    <form>
        <input name="imgfile" type="file" id="imgfile" size="40" onchange="viewmypic(showimg,this.form.imgfile);"/>
        <br/>
    </form>
    <img name="showimg" id="showimg" src="" style="display:none;" alt="预览图片"/>
    <br/>
    </div>
    <div style="display:none">
    </div>
</center>
</body>
</html>